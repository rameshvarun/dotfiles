#!/usr/bin/env bash
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
DOWNLOADS_DIR="$SCRIPT_DIR/.downloads"
FILE="$DOWNLOADS_DIR/cmc"
URL="https://raw.githubusercontent.com/ClockworkNet/cmc/4f0cf83ec0deca37e1c9cae746a20d0018760db6/cmc"
SHASUM="564b32f07e690b87674c2aa9c85991a78f1eb261" 

if [ ! -f $FILE ]; # Download file if it doesn't exist.
then
  mkdir -p "$DOWNLOADS_DIR"; curl "$URL" -o "$FILE"; chmod +x $FILE;
fi

if [ "$(cat $FILE | shasum)" == "$SHASUM  -" ] # Verify shasum.
then
  $FILE "$@"
else
  echo "Checksum failed. $(cat $FILE | shasum) != $SHASUM  -"
fi
